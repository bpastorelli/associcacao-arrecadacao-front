<section class="content-header">
</section>

<section class="content">
  <section class="invoice">

        <form #form="ngForm" *ngFor="let residencia of residencias" novalidate>
          <div class="row">
            <div class="col-xs-12">
              <h2 *ngIf="residenciaId === '0'" class="page-header">
                <i></i> Cadastrar Residência
              </h2>
              <h2 *ngIf="residenciaId != '0'" class="page-header">
                <i></i> Atualizar Residência
              </h2>
            </div>
          </div>

          <div class="row invoice-info">

            <div class="col-xs-12">
              <p class="control-label">Matrícula:</p>
            </div>
            <div class="col-sm-2 col-xs-12">
              <mt-input-container errorMessage="Campo obrigatório!" label="Matrícula">
                <input class="form-control" disabled #matricula type="text" name="matricula" [(ngModel)]="residencia.matricula" required maxlength="10" placeholder="Matrícula" autocomplete="off">
              </mt-input-container>
            </div>

            <div class="col-xs-12">
              <p class="control-label">Endereço completo:</p>
            </div>

            <div class="col-sm-2 col-xs-6">
              <mt-input-container errorMessage="Campo obrigatório com mínimo 5 caracteres" label="e-mail">
                <input class="form-control" #cep name="cep" [(ngModel)]="residencia.cep" required minlength="8" placeholder="CEP" autocomplete="off">
              </mt-input-container>
            </div>

            <div class="col-sm-6 col-xs-6">
              <mt-input-container errorMessage="Campo obrigatório!" label="Endereço">
                <input class="form-control" #endereco type="text" name="endereco" [(ngModel)]="residencia.endereco" required maxlength="100" placeholder="Endereço" autocomplete="off">
              </mt-input-container>
            </div>

            <div class="col-sm-2 col-xs-6">
              <mt-input-container errorMessage="Campo obrigatório e somente números" label="Número">
                <input class="form-control" #numero name="numero" [(ngModel)]="residencia.numero" required minlength="1" placeholder="Número" pattern="^[0-9]*$" autocomplete="off">
              </mt-input-container>
            </div>

            <div class="col-sm-4 col-xs-12">
              <input class="form-control" #complemento name="complemento" [(ngModel)]="residencia.complemento" maxlength="50" placeholder="Complemento" autocomplete="off">
            </div>

            <div class="col-xs-12">
              <p class="control-label">Bairro:</p>
            </div>
            <div class="col-sm-4 col-xs-6">
              <mt-input-container errorMessage="Campo obrigatório!" label="Bairro">
                <input class="form-control" #bairro name="bairro" [(ngModel)]="residencia.bairro" required maxlength="50" placeholder="Bairro" autocomplete="off">
              </mt-input-container>
            </div>

            <div class="col-xs-12">
              <p class="control-label">Cidade:</p>
            </div>
            <div class="col-sm-4 col-xs-6">
              <mt-input-container errorMessage="Campo obrigatório com mínimo 5 caracteres" label="Cidade">
                <input class="form-control" #cidade name="cidade" [(ngModel)]="residencia.cidade" required maxlength="50" placeholder="Cidade" autocomplete="off">
              </mt-input-container>
            </div>

            <div class="col-sm-1 col-xs-6">
              <mt-input-container errorMessage="Campo obrigatório!" label="UF">
                <input class="form-control" #uf name="uf" [(ngModel)]="residencia.uf" required minlength="2" placeholder="UF" autocomplete="off">
              </mt-input-container>
            </div>

            <div class="col-sm-1 col-xs-6">
              <mt-input-container errorMessage="Campo obrigatório e somente números" label="Código Residência">
                <input class="form-control" type="hidden" disabled name="id" #id [(ngModel)]="residencia.id" minlength="1" pattern="^[0-9]*$" placeholder="Código Residência" autocomplete="off">
              </mt-input-container>
            </div>

        <!-- /.row -->
        </div>

        <div class="row">
          <div *ngIf="residenciaId === '0'" class="col-xs-12">
            <button (click)="postResidencia(form.value)" class="btn btn-success pull-right"
            [disabled]="!form.valid"><i></i> Concluir Cadastro
            </button>
          </div>
          <div *ngIf="residenciaId != '0'" class="col-xs-12">
            <button (click)="putResidencia(form.value, id.value)" class="btn btn-success pull-right"
            [disabled]="!form.valid"><i></i> Atualizar Cadastro
            </button>
          </div>
        </div>

      </form>
    </section>
</section>
